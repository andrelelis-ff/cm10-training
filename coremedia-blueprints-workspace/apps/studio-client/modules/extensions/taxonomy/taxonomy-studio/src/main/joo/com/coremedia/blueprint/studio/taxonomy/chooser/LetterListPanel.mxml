<?xml version="1.0" encoding="UTF-8"?>
<local:LetterListPanelBase xmlns:fx="http://ns.adobe.com/mxml/2009"
                           xmlns:local="com.coremedia.blueprint.studio.taxonomy.chooser.*"
                           xmlns:exml="http://www.jangaroo.net/exml/0.8"
                           xmlns="exml:ext.config"
                           xmlns:editor="exml:com.coremedia.cms.editor.sdk.config"
                           xmlns:ui="exml:com.coremedia.ui.config"
                           itemId="{config.selectedNodeId}"
                           scrollable="true">
  <fx:Metadata>
    [ResourceBundle('com.coremedia.icons.CoreIcons')]
  </fx:Metadata>
  <fx:Script><![CDATA[
    import com.coremedia.ui.bem.SpacingBEMEntities;
    import com.coremedia.ui.data.ValueExpression;
    import com.coremedia.ui.skins.ContainerSkin;

    public static const xtype:String = "com.coremedia.blueprint.studio.config.taxonomy.letterListPanel";

    private var config:LetterListPanel;

    public native function LetterListPanel(config:LetterListPanel = null);

    /**
     * Contains an array of letters that are active for the current level.
     */
    [Bindable]
    public var activeLetters:ValueExpression;

    /**
     * Contains the letter the user has clicked.
     */
    [Bindable]
    public var selectedLetter:ValueExpression;

    /**
     * Contains node list of the selected parent.
     */
    [Bindable]
    public var selectedNodeList:ValueExpression;

    /**
     * Contains the row that children should be displayed next.
     */
    [Bindable]
    public var selectedNodeId:ValueExpression;

    /**
     * The value expression that contains the active selected site by this combo.
     */
    [Bindable]
    public var selectionExpression:ValueExpression;

    /**
     * An optional ValueExpression which makes the component read-only if it is evaluated to true.
     */
    [Bindable]
    public var forceReadOnlyValueExpression:ValueExpression;
    ]]></fx:Script>
  <fx:Declarations>
    <!--- the id of the taxonomy that's tree is used to add items from. -->
    <fx:String id="taxonomyId"/>

    <!--- If true, only one item can be selected from the list. -->
    <fx:String id="singleSelection"/>
  </fx:Declarations>

  <local:plugins>
    <editor:BindDisablePlugin bindTo="{getListValuesExpression()}"
                              forceReadOnlyValueExpression="{config.forceReadOnlyValueExpression}"/>
  </local:plugins>
  <local:items>
    <Container flex="1" autoScroll="true" itemId="{ITEMS_CONTAINER_ITEM_ID}">
      <plugins>
        <ui:BindComponentsPlugin valueExpression="{getListValuesExpression()}"
                                 configBeanParameterName="content"
                                 clearBeforeUpdate="true"
                                 reuseComponents="false">
          <ui:template>
            <local:LetterListItemPanel selectedNodeList="{config.selectedNodeList}"
                                       letterListPanel="{this}"
                                       singleSelection="{config.singleSelection}"/>
          </ui:template>
        </ui:BindComponentsPlugin>
      </plugins>
      <layout>
        <layout_Anchor/>
      </layout>
    </Container>
  </local:items>

</local:LetterListPanelBase>
