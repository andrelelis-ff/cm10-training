<?xml version="1.0" encoding="UTF-8"?>
<!-- Extend the standard Studio and Blueprint components for SFMC P13N-->
<editor:StudioPlugin
        xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:localComponent="com.coremedia.blueprint.base.sfmc.p13n.studio.components.*"
        xmlns:localPersonaComponents="com.coremedia.blueprint.base.sfmc.p13n.studio.components.persona.*"
        xmlns:editor="exml:com.coremedia.cms.editor.sdk.config"
        xmlns:exml="http://www.jangaroo.net/exml/0.8"
        xmlns="exml:ext.config"
        xmlns:perso="exml:com.coremedia.personalization.ui.config"
        xmlns:ui="exml:com.coremedia.ui.config"
        xmlns:p13n="exml:com.coremedia.blueprint.personalization.editorplugin.config">
  <fx:Metadata>
    [ResourceBundle('com.coremedia.blueprint.sfmc.p13n.studio.SFMCP13NStudioPlugin')]
  </fx:Metadata>
  <fx:Script><![CDATA[
    import com.coremedia.blueprint.base.sfmc.p13n.studio.model.JourneyImpl;
    import com.coremedia.blueprint.base.sfmc.p13n.studio.model.JourneysImpl;

    public static const xtype:String = "com.coremedia.blueprint.sfmc.p13n.studio.config.sFMCP13NStudioPlugin";

    private var config:SFMCP13NStudioPlugin;

    public native function SFMCP13NStudioPlugin(config:SFMCP13NStudioPlugin = null);
    ]]></fx:Script>

  <editor:rules>
    <perso:SelectionRulesField>
      <perso:plugins>
        <perso:Addconditionitems>
          <perso:items>
            <localComponent:SFMCJourneyCondition conditionName="SFMC Journey" propertyPrefix="sfmc"/>
          </perso:items>
        </perso:Addconditionitems>
      </perso:plugins>
    </perso:SelectionRulesField>
    <p13n:CMPersonaForm>
      <p13n:plugins>
        <ui:AddItemsPlugin recursive="true">
          <ui:items>
            <!--GroupContainer: Commerce-->
            <localPersonaComponents:SFMCPersonaGroupContainer/>
          </ui:items>
          <ui:after>
            <Component itemId="{CMPersonaForm.PERSONA_IMAGE_ITEM_ID}"/>
          </ui:after>
        </ui:AddItemsPlugin>
      </p13n:plugins>
    </p13n:CMPersonaForm>
  </editor:rules>
  <editor:configuration>
    <editor:RegisterRestResource beanClass="{JourneyImpl}"/>
    <editor:RegisterRestResource beanClass="{JourneysImpl}"/>
  </editor:configuration>

</editor:StudioPlugin>
